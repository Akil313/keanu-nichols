<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>GSoC Week 8: What about the future? | Keanu Nichols</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="GSoC Week 8: What about the future?" />
<meta name="author" content="Keanu Nichols" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week." />
<meta property="og:description" content="My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week." />
<link rel="canonical" href="http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html" />
<meta property="og:url" content="http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html" />
<meta property="og:site_name" content="Keanu Nichols" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-06T06:20:00-04:00" />
<script type="application/ld+json">
{"description":"My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week.","author":{"@type":"Person","name":"Keanu Nichols"},"@type":"BlogPosting","url":"http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html","headline":"GSoC Week 8: What about the future?","dateModified":"2018-07-06T06:20:00-04:00","datePublished":"2018-07-06T06:20:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Keanu Nichols" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Keanu Nichols</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/portfolio/">Porfolio</a><a class="page-link" href="/temp/">temp</a></div>
      </nav></div>
</header>
<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>GSoC Week 8: What about the future? | Keanu Nichols</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="GSoC Week 8: What about the future?" />
<meta name="author" content="Keanu Nichols" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week." />
<meta property="og:description" content="My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week." />
<link rel="canonical" href="http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html" />
<meta property="og:url" content="http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html" />
<meta property="og:site_name" content="Keanu Nichols" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-06T06:20:00-04:00" />
<script type="application/ld+json">
{"description":"My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week.","author":{"@type":"Person","name":"Keanu Nichols"},"@type":"BlogPosting","url":"http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html","headline":"GSoC Week 8: What about the future?","dateModified":"2018-07-06T06:20:00-04:00","datePublished":"2018-07-06T06:20:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/gsoc/2018/07/06/gsoc-Week-8.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">GSoC Week 8: What about the future?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-07-06T06:20:00-04:00" itemprop="datePublished">Jul 6, 2018
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><br />
My fifth blog post, don’t worry this one is going to be pretty short. Maybe I’m giving you all a rest after last week, maybe….. So this week actually doesn’t have a week planned out per say, I just mostly worked on some things I needed to complete from last week.</p>

<p>So this week’s task with my mentor <a href="http://www.seangoggins.net/">Sean Goggins</a> is as follows:</p>

<h1 id="goals-for-the-week">Goals for the week:</h1>
<ol>
  <li>Build a filter to disregard long attachments or included items …</li>
  <li>Do a simple sentiment analysis on each message.  <em>Perhaps keep the “score” in an additional column in the table.</em></li>
  <li>Experiment with ways of filtering out old message strings from subsequent messages on the mailing lists and identifying mailing list discussion threads (some lists have them automatically, some don’t) … so, when you reply to an email, it often includes the text  you are responding to … it’s about getting rid off all the prior messages before the message at the top …</li>
</ol>

<h2 id="goals">Goals</h2>

<p>Goal 1:<br />
This is something I still am not entirely sure about how to do, so I will discuss it but I have been looking into it, the problem is how to disregard those long sections and then look at text after it. The section sizes could change.</p>

<p>Goal 2:<br />
I almost forgot that I did this, but this is what I believe was a better implementation for combining the two dataframes that have the initial table with all the messages “df_list” and then we have the dataframe with the scores “df3” (I might need to work on those names) and I simply combine them (line 5) into a new dataframe “combine”.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">print</span><span class="p">(</span><span class="n">df3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df_list</span><span class="p">)</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">df3</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">df_list</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">combine</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_list</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df3</span><span class="p">))</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>I then upload this as a new dataframe (line 1)(seen below). Of course the problem is what happens when you say for example have a SQL table with like 1 GB of messages, so will see how we can improve on that.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="n">combine</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'mail_lists_sentiment_scores'</span><span class="p">,</span><span class="n">con</span><span class="o">=</span><span class="n">connect</span><span class="o">.</span><span class="n">db</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">'replace'</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>Goal 3:<br />
Now coming back from last week I was able to complete this task but the problem was that it wasn’t set for future messages. So if I were to download new messages it would still download all the messages that related to a thread, and we want it to disregard those messages and only download the email that had the full thread in it. So what I did was actually create a separate function on a whole to check for both new messages being downloaded or if it’s your first time downloading the mail archive. As seen below is the function “write_message” now it’s actually longer but I just copied the first section of it because the rest of the function is more or less the same. Now we first enter the for loop (line 4) to check through each message the reason I have this first part is to actually check to see if the messages being downloaded is being downloaded for the first time (lines 7,11 and 13) the first if statement ( line 7) checks if it’s not new, if it is it converts the date of that message to a datetime object (line 8) and then it goes into the next if statement (line 11) and see’s if it’s before the most recent message, if it it goes onto the next message (line 13). If it’s not it changes the dictionary “mail_check” (line 16) that stores the type of mailing list it is, for example it can be “False” meaning it doesn’t need to be updated, it could be “update” which I hope you know what it means (lol) and then it can be “new” meaning we have to add all the messages (In <a href="http://127.0.0.1:4000/gsoc/2018/06/22/gsoc-Week-6.html">Week 6</a> previous post I spoke about using this dictionary and declaring it).</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">write_message</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">repo</span><span class="p">,</span><span class="n">type_archive</span><span class="p">,</span><span class="n">mail_check</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">store</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">repo</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">from_date</span><span class="o">=</span><span class="n">time</span><span class="p">):</span>
        <span class="c">#print(message,"\n\n\n\n\n\n\n\n")</span>
        <span class="c">#print(message['data']['Message-ID'])</span>
        <span class="k">if</span><span class="p">(</span><span class="n">type_archive</span> <span class="o">==</span> <span class="s">'not_new'</span><span class="p">):</span>
            <span class="n">mess_check</span> <span class="o">=</span> <span class="n">Piper</span><span class="o">.</span><span class="n">convert_date</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Date'</span><span class="p">])</span>
            <span class="c">#mess_check = Piper.convert_date("Thu, 24 Mar 2019 20:37:11 +0000")</span>
            <span class="c">#print(time)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">type_archive</span> <span class="o">==</span> <span class="s">'not_new'</span> <span class="ow">and</span> <span class="n">mess_check</span> <span class="o">&lt;=</span> <span class="n">time</span> <span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Right here"</span><span class="p">)</span>
            <span class="k">continue</span>            
        <span class="k">elif</span><span class="p">(</span><span class="n">type_archive</span> <span class="o">==</span> <span class="s">'not_new'</span> <span class="ow">and</span> <span class="n">mess_check</span> <span class="o">&gt;</span> <span class="n">time</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"sigh"</span><span class="p">)</span>
            <span class="n">mail_check</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="s">'update'</span>
            
        <span class="n">ID</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Message-ID'</span><span class="p">]</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>Resources:
GSoC ideas (Specifically Ideas 2 &amp; 3): <a href="https://wiki.linuxfoundation.org/chaoss/gsoc-ideas">Ideas</a><br />
My proposal: <a href="https://github.com/kmn5409/chaoss-microtasks/blob/master/GSoC-2018-Keanu-Nichols-CHAOSS-proposal.pdf">My proposal</a></p>

<p>Files Used:
Python File - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/PiperReader%2012.py#L149">PiperRead 12</a><br />
Jupyter Notebook - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/PiperMail%208.ipynb">PiperMail 8</a></p>

<p>Jupyter Notebook - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/NLP/Sentiment_Piper%206.ipynb">Sentiment_Piper 6</a></p>


  </div><a class="u-url" href="/gsoc/2018/07/06/gsoc-Week-8.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Keanu Nichols</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Keanu Nichols</li><li><a class="u-email" href="mailto:keanu.nichols@my.uwi.edu">keanu.nichols@my.uwi.edu</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/kmn5409"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kmn5409</span></a></li><li><a href="https://www.linkedin.com/in/keanu-nichols"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">keanu-nichols</span></a></li><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>rss</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A blog about Keanu Nichols for writing about his school/work experience and projects that he worked on.
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
