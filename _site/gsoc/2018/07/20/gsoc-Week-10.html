<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>GSoC Week 10: Could you not? | Keanu Nichols Blog</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="GSoC Week 10: Could you not?" />
<meta name="author" content="Keanu Nichols" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol." />
<meta property="og:description" content="To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol." />
<link rel="canonical" href="http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html" />
<meta property="og:url" content="http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html" />
<meta property="og:site_name" content="Keanu Nichols Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-20T06:20:00-04:00" />
<script type="application/ld+json">
{"description":"To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol.","author":{"@type":"Person","name":"Keanu Nichols"},"@type":"BlogPosting","url":"http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html","headline":"GSoC Week 10: Could you not?","dateModified":"2018-07-20T06:20:00-04:00","datePublished":"2018-07-20T06:20:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Keanu Nichols Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Keanu Nichols Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/portfolio/">Porfolio</a><a class="page-link" href="/temp/">temp</a></div>
      </nav></div>
</header>
<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>GSoC Week 10: Could you not? | Keanu Nichols Blog</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="GSoC Week 10: Could you not?" />
<meta name="author" content="Keanu Nichols" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol." />
<meta property="og:description" content="To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol." />
<link rel="canonical" href="http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html" />
<meta property="og:url" content="http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html" />
<meta property="og:site_name" content="Keanu Nichols Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-20T06:20:00-04:00" />
<script type="application/ld+json">
{"description":"To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol.","author":{"@type":"Person","name":"Keanu Nichols"},"@type":"BlogPosting","url":"http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html","headline":"GSoC Week 10: Could you not?","dateModified":"2018-07-20T06:20:00-04:00","datePublished":"2018-07-20T06:20:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/gsoc/2018/07/20/gsoc-Week-10.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">GSoC Week 10: Could you not?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-07-20T06:20:00-04:00" itemprop="datePublished">Jul 20, 2018
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><br />
To be honest I’m really struggling here with naming these things, I think this week especially lol. But good news I passed my second evaluation (phew that was close) just one more, to be honest I’m very excited for that t-shirt lol.</p>

<p>So this week’s task with my mentor <a href="http://www.seangoggins.net/">Sean Goggins</a> is as follows:</p>

<h1 id="goals-for-the-week">Goals for the week:</h1>
<ol>
  <li>Add columns (comment id, time stamp and repository id) for the github SQL Table</li>
  <li>Upload the sentiment scores to the SQL Database.</li>
  <li>Upload the emails from the Linux Kernel mailing list</li>
</ol>

<h1 id="bonus">Bonus:</h1>
<p>4) Work on getting rid of text files on a whole.</p>

<h2 id="goals">Goals</h2>

<p>Goal 1:<br />
So this is like a continuation from last week and I spoke with Sean and what we needed to do was just better detail the tables. So seen below is the new set-up for the tables. So we just added these columns(comment id, time stamp and repository id) and what it does is just make it easier for people to query things.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="n">columns1</span> <span class="o">=</span> <span class="s">'augurmsgID'</span><span class="p">,</span><span class="s">"backend_name"</span><span class="p">,</span><span class="s">'repo_link'</span><span class="p">,</span><span class="s">"owner"</span><span class="p">,</span><span class="s">"repo"</span><span class="p">,</span><span class="s">"subject"</span><span class="p">,</span>\
         <span class="s">"status"</span><span class="p">,</span><span class="s">"category"</span><span class="p">,</span><span class="s">"issue_number"</span><span class="p">,</span><span class="s">"timestamp"</span><span class="p">,</span>\
         <span class="s">"issue_id"</span><span class="p">,</span><span class="s">"user"</span><span class="p">,</span><span class="s">"body"</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns1</span><span class="p">)</span>
<span class="n">item</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"github_issues"</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">db</span><span class="p">,</span>\
   <span class="n">if_exists</span><span class="o">=</span><span class="s">'replace'</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
   <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s">'augurmsgID'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>
           <span class="s">'backend_name'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">300</span><span class="p">),</span>
           <span class="s">'repo_link'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">300</span><span class="p">),</span>
           <span class="s">'owner'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">300</span><span class="p">),</span>
           <span class="s">'repo'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">300</span><span class="p">),</span>
           <span class="s">'subject'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">300</span><span class="p">),</span>
           <span class="s">'status'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
           <span class="s">'category'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
           <span class="s">'issue_number'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>
           <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>
           <span class="s">'issue_id'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>
           <span class="s">'user'</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VARCHAR</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
           <span class="s">'body'</span><span class="p">:</span><span class="n">s</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">TEXT</span>             
   <span class="p">})</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>There seems to be a problem with uploading the github issues where there seems to be some messages where these are some characters that are not in the format used by the SQL Database. The one I set the database to is ‘utf8’ but that doesn’t seem to be able to recognize the characters that are in some of these issues so I will need to do some research about what can store them.</p>

<p>Goal 2:<br />
Now before I was doing the sentiment analysis on the messages but I didn’t actually upload this to the SQL Database but now I go about uploading it. As you can see here I create the dataframe and start by arranging the messages by subject and then analysing each of the messages related to that subject and determining the sentiment (either positive, negative or neutral) of each message and appending this to a dataframe.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="code"><pre><span class="n">grouped</span> <span class="o">=</span> <span class="n">df_users</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'subject'</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">col</span> <span class="o">=</span> <span class="s">'score'</span><span class="p">,</span><span class="s">'sentiment'</span>
<span class="n">columns1</span> <span class="o">=</span> <span class="s">'augurmsgID'</span><span class="p">,</span><span class="s">"backend_name"</span><span class="p">,</span><span class="s">'repo_link'</span><span class="p">,</span><span class="s">"owner"</span><span class="p">,</span><span class="s">"repo"</span><span class="p">,</span><span class="s">"subject"</span><span class="p">,</span>\
         <span class="s">"status"</span><span class="p">,</span><span class="s">"category"</span><span class="p">,</span><span class="s">"issue_number"</span><span class="p">,</span><span class="s">"timestamp"</span><span class="p">,</span>\
         <span class="s">"issue_id"</span><span class="p">,</span><span class="s">"user"</span><span class="p">,</span><span class="s">"body"</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns1</span><span class="p">)</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">df_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_users</span><span class="p">)</span>
<span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">grouped</span><span class="p">:</span>
   <span class="c">#print(group)</span>
   <span class="n">issue_num</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_users</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_users</span><span class="p">[</span><span class="s">'subject'</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">][</span><span class="s">'issue_number'</span><span class="p">])</span><span class="o">.</span><span class="n">values</span>
   <span class="n">messages</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_users</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_users</span><span class="p">[</span><span class="s">'subject'</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">][</span><span class="s">'body'</span><span class="p">])</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
   <span class="n">id1</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_users</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_users</span><span class="p">[</span><span class="s">'subject'</span><span class="p">]</span> <span class="o">==</span> <span class="n">group</span><span class="p">][</span><span class="s">'body'</span><span class="p">])</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
   <span class="c">#print("Issue number: ",issue_num[0])</span>
   <span class="c">#break</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
       <span class="c">#print(i)</span>
       <span class="n">sentences</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
       <span class="n">compound</span> <span class="o">=</span> <span class="mi">0</span>
       <span class="n">part</span> <span class="o">=</span> <span class="mi">0</span>
       <span class="n">sentiment</span> <span class="o">=</span> <span class="s">"Positive"</span>
       <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
           <span class="n">scores</span> <span class="o">=</span> <span class="n">sid</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
           <span class="n">compound</span><span class="o">+=</span><span class="n">scores</span><span class="p">[</span><span class="s">'compound'</span><span class="p">]</span>
           <span class="n">part</span><span class="o">+=</span><span class="mi">1</span>
           <span class="c">#print(sentence,scores)</span>
           <span class="c">#if(scores['compound'] &lt; 0.1):</span>
           <span class="c">#    print(sentence,scores['compound'])</span>
       <span class="n">avg</span> <span class="o">=</span> <span class="n">compound</span><span class="o">/</span><span class="n">part</span>
       <span class="k">if</span><span class="p">(</span><span class="n">avg</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
           <span class="n">sentiment</span> <span class="o">=</span> <span class="s">"Neutral"</span>
       <span class="k">elif</span><span class="p">(</span><span class="n">avg</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
           <span class="n">sentiment</span> <span class="o">=</span> <span class="s">"Negative"</span>
       <span class="n">li</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="n">avg</span><span class="p">,</span><span class="n">sentiment</span><span class="p">]]</span>
       <span class="n">df_temp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">li</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
       <span class="n">df3</span> <span class="o">=</span> <span class="n">df3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_temp</span><span class="p">)</span>
       <span class="c">#if(avg &lt; -0.5):</span>
           <span class="c">#print(i,avg)</span>
           <span class="c">#print("\n\n\n\n\n\n")</span>
   <span class="c">#if(num == 40):</span>
   <span class="c">#    break</span>
   <span class="n">num</span><span class="o">+=</span><span class="mi">1</span>
   <span class="c">#print("\n\n\n")</span>
<span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>I then combine the sentiment score dataframe and the original dataframe with all the messages.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="c">#print(df3)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df_list</span><span class="p">)</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">df3</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df3</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">df_list</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">combine</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_list</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df3</span><span class="p">))</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>After I upload this to the SQL Database as a table ‘github_issues_sentiment_scores’</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="n">combine</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'github_issues_sentiment_scores'</span><span class="p">,</span>\
              <span class="n">con</span><span class="o">=</span><span class="n">db</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">'replace'</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>Goal 3:<br />
This is a somewhat a continuation of last week, now I spoke with someone at CHAOSS and they gave me a link to a mailing archive that was storing the linux kernel mailing lists, but the problem was that it seemed like I could download them in chunks. Which is a problem because the main point of what I’m doing is to make things easier to download and analyse. But fear not I was put onto someone who actually has these emails, the only problem is that it is a large amount of emails (more than 3 GB) so it will take awhile to download and then upload.</p>

<p>Goal 4:<br />
Now to be honest this was a goal I was planning to work on after I finished Google Summer of Code because I do plan to still continue my work and working on this project because I believe it has a lot of potential and can be useful to people. So what I wanted to start doing is actually getting rid of the need to actually write the the messages to text files. So what this entails was to actually update ‘write_message’ in PiperMail the jupyter notebook and instead of writing to a text file it would store the message in a dictionary and after running through around 5000 (line 66) it would call PiperReader (line 67) and then upload these messages and then it goes through the next set of messages. It does all of this for one mailing list and then it exits ‘write_message’ and a next mailing list is given. This gets rid of the need of storing it in a text file first and then reading from the text file.</p>

<figure class="highlight">
  <pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">write_message</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="n">type_archive</span><span class="p">,</span><span class="n">mail_check</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">db</span><span class="p">,</span><span class="n">res</span><span class="p">,</span><span class="n">session</span><span class="p">,</span><span class="n">archives</span><span class="p">,</span><span class="n">numb</span><span class="p">,</span><span class="n">mail_lists</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
   <span class="n">thread</span> <span class="o">=</span> <span class="bp">None</span>
   <span class="n">store</span> <span class="o">=</span> <span class="bp">None</span>
   <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="n">di</span> <span class="o">=</span> <span class="p">{}</span>
   <span class="c">#print("HEREEEE")</span>
   <span class="k">if</span><span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="s">"lkml"</span><span class="p">):</span>
       <span class="n">time</span> <span class="o">=</span> <span class="n">Piper</span><span class="o">.</span><span class="n">convert_date</span><span class="p">(</span><span class="s">"Thu, 1 Jan 2013 20:37:11 +0000"</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">repo</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">from_date</span><span class="o">=</span><span class="n">time</span><span class="p">):</span>
       <span class="c">#print(message,"\n\n\n\n\n\n\n\n")</span>
       <span class="c">#print(message['data']['Message-ID'])</span>
       <span class="k">if</span><span class="p">(</span><span class="n">type_archive</span> <span class="o">==</span> <span class="s">'not_new'</span><span class="p">):</span>
           <span class="n">mess_check</span> <span class="o">=</span> <span class="n">Piper</span><span class="o">.</span><span class="n">convert_date</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Date'</span><span class="p">])</span>
           <span class="c">#mess_check = Piper.convert_date("Thu, 24 Mar 2019 20:37:11 +0000")</span>
           <span class="c">#print(time)</span>
       <span class="k">if</span><span class="p">(</span><span class="n">type_archive</span> <span class="o">==</span> <span class="s">'not_new'</span> <span class="ow">and</span> <span class="n">mess_check</span> <span class="o">&lt;=</span> <span class="n">time</span> <span class="p">):</span>
           <span class="k">print</span><span class="p">(</span><span class="s">"Right here"</span><span class="p">)</span>
           <span class="k">continue</span>           
       <span class="k">elif</span><span class="p">(</span><span class="n">type_archive</span> <span class="o">==</span> <span class="s">'not_new'</span> <span class="ow">and</span> <span class="n">mess_check</span> <span class="o">&gt;</span> <span class="n">time</span><span class="p">):</span>
           <span class="n">mail_check</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="s">'update'</span>
          
       <span class="n">ID</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Message-ID'</span><span class="p">]</span>
       <span class="k">try</span><span class="p">:</span>
           <span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'References'</span><span class="p">]</span>
           <span class="s">'''if(message['data']['Message-ID'] == '&lt;CAFHD1sO814do11F9cKVZgr5fo+dw5q-VmfrYO_Q9vv6kXe8NjA@mail.gmail.com&gt;'):
               print(thread)
               print(store)'''</span>                            
           <span class="k">if</span><span class="p">((</span><span class="ow">not</span> <span class="n">thread</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">thread</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Message-ID'</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'References'</span><span class="p">])):</span>
               <span class="c">#bj = json.dumps(thread, indent=4, sort_keys=True)</span>
               <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">thread</span>
               <span class="c">#utfile.write(obj)</span>
               <span class="c">#utfile.write('\n')</span>
               <span class="n">store</span> <span class="o">=</span> <span class="bp">None</span>
               <span class="n">k</span><span class="o">+=</span><span class="mi">1</span>
               <span class="k">print</span><span class="p">(</span><span class="s">"why"</span><span class="p">)</span>
              
           <span class="k">elif</span><span class="p">(</span> <span class="p">(</span><span class="ow">not</span> <span class="n">store</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">store</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Message-ID'</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'References'</span><span class="p">])):</span>
               <span class="c">#print(message['data']['References'])</span>
               <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span>
               <span class="c">#bj = json.dumps(store, indent=4, sort_keys=True)</span>
               <span class="c">#utfile.write(obj)</span>
               <span class="c">#utfile.write('\n')</span>
               <span class="n">store</span> <span class="o">=</span> <span class="bp">None</span>
               <span class="k">print</span><span class="p">(</span><span class="s">"yep"</span><span class="p">)</span>
               <span class="n">k</span><span class="o">+=</span><span class="mi">1</span>
           <span class="n">thread</span> <span class="o">=</span> <span class="n">message</span>
       <span class="k">except</span><span class="p">:</span>
           <span class="c">#print("got'em")</span>
           <span class="k">if</span><span class="p">(</span><span class="ow">not</span> <span class="n">thread</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
               <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">thread</span>
               <span class="c">#bj = json.dumps(thread, indent=4, sort_keys=True)</span>
               <span class="c">#utfile.write(obj)</span>
               <span class="c">#utfile.write('\n')</span>
               <span class="n">thread</span> <span class="o">=</span> <span class="bp">None</span>
               <span class="k">print</span><span class="p">(</span><span class="s">"got-em"</span><span class="p">)</span>
               <span class="n">k</span><span class="o">+=</span><span class="mi">1</span>
           <span class="k">elif</span><span class="p">(</span><span class="ow">not</span> <span class="n">store</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
               <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span>
               <span class="c">#bj = json.dumps(store, indent=4, sort_keys=True)</span>
               <span class="c">#utfile.write(obj)</span>
               <span class="c">#utfile.write('\n')</span>
               <span class="n">store</span> <span class="o">=</span> <span class="bp">None</span>
               <span class="k">print</span><span class="p">(</span><span class="s">"getting"</span><span class="p">)</span>
               <span class="n">k</span><span class="o">+=</span><span class="mi">1</span>
           <span class="n">store</span> <span class="o">=</span> <span class="n">message</span>
       <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">di</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5000</span><span class="p">):</span>
           <span class="n">numb</span><span class="p">,</span><span class="n">mail_lists</span> <span class="o">=</span> <span class="n">Piper</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">connect</span><span class="o">.</span><span class="n">db</span><span class="p">,</span><span class="n">mail_check</span><span class="p">,</span><span class="n">archives</span><span class="p">,</span><span class="n">mail_lists</span><span class="p">,</span><span class="n">res</span><span class="p">,</span><span class="n">session</span><span class="p">,</span><span class="n">di</span><span class="p">,</span><span class="n">numb</span><span class="p">)</span>
           <span class="n">di</span> <span class="o">=</span> <span class="p">{}</span>
           <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
       <span class="c">#print("!"*50,"NEW MESSAGE","!"*50)</span>
   <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">di</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5000</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">di</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
       <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">di</span><span class="p">))</span>
       <span class="c">#print(di)</span>
       <span class="n">numb</span><span class="p">,</span><span class="n">mail_lists</span> <span class="o">=</span> <span class="n">Piper</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">connect</span><span class="o">.</span><span class="n">db</span><span class="p">,</span><span class="n">mail_check</span><span class="p">,</span><span class="n">archives</span><span class="p">,</span><span class="n">mail_lists</span><span class="p">,</span><span class="n">res</span><span class="p">,</span><span class="n">session</span><span class="p">,</span><span class="n">di</span><span class="p">,</span><span class="n">numb</span><span class="p">)</span>
       <span class="n">di</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="k">else</span><span class="p">:</span>
       <span class="n">di</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="n">thread</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">store</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)):</span>
       <span class="n">good</span> <span class="o">=</span> <span class="mi">1</span>
   <span class="k">elif</span><span class="p">(</span> <span class="p">(</span><span class="n">thread</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">store</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="p">):</span>
       <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span>
       <span class="c">#obj = json.dumps(store, indent=4, sort_keys=True)</span>
       <span class="c">#outfile.write(obj)</span>
       <span class="c">#outfile.write('\n')</span>
   <span class="k">elif</span><span class="p">(</span> <span class="p">(</span><span class="n">store</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">thread</span> <span class="o">==</span> <span class="bp">None</span><span class="p">)):</span>
       <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">thread</span>
       <span class="c">#obj = json.dumps(thread, indent=4, sort_keys=True)</span>
       <span class="c">#outfile.write(obj)</span>
       <span class="c">#outfile.write('\n')</span>
   <span class="k">elif</span><span class="p">(</span><span class="n">store</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'Message-ID'</span><span class="p">]</span> <span class="ow">in</span> <span class="n">thread</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'References'</span><span class="p">]):</span>
       <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">thread</span>
       <span class="c">#obj = json.dumps(thread, indent=4, sort_keys=True)</span>
       <span class="c">#outfile.write(obj)</span>
       <span class="c">#outfile.write('\n')</span>
   <span class="k">else</span><span class="p">:</span>
       <span class="n">di</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span>
       <span class="c">#obj = json.dumps(store, indent=4, sort_keys=True)</span>
       <span class="c">#outfile.write(obj)</span>
       <span class="c">#outfile.write('\n') </span>
   <span class="c">#outfile.close()</span>
   <span class="k">if</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">di</span><span class="p">)):</span>
       <span class="n">numb</span><span class="p">,</span><span class="n">mail_lists</span> <span class="o">=</span> <span class="n">Piper</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">connect</span><span class="o">.</span><span class="n">db</span><span class="p">,</span><span class="n">mail_check</span><span class="p">,</span><span class="n">archives</span><span class="p">,</span><span class="n">mail_lists</span><span class="p">,</span><span class="n">res</span><span class="p">,</span><span class="n">session</span><span class="p">,</span><span class="n">di</span><span class="p">,</span><span class="n">numb</span><span class="p">)</span>
   <span class="k">return</span> <span class="n">numb</span><span class="p">,</span><span class="n">mail_lists</span></pre></td></tr></tbody></table></code></pre>
</figure>

<p>PiperReader was actually updated but essentially all I did was get rid of the function read_json and instead of referencing the text file at some points it would only look at the dictionary that was passed.</p>

<p>Resources:
GSoC ideas (Specifically Ideas 2 &amp; 3): <a href="https://wiki.linuxfoundation.org/chaoss/gsoc-ideas">Ideas</a><br />
My proposal: <a href="https://github.com/kmn5409/chaoss-microtasks/blob/master/GSoC-2018-Keanu-Nichols-CHAOSS-proposal.pdf">My proposal</a></p>

<p>Files Used:
Python File - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/PiperReader%2016.py">PiperReader 16</a><br />
Jupyter Notebook - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/PiperMail%2011.ipynb">PiperMail 11</a></p>

<p>Jupyter Notebook - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/NLP/Sentiment_Piper%207.ipynb">Sentiment_Piper 7</a></p>

<p>Jupyter Notebook - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/github-issues%202.ipynb">github-issues 2</a></p>

<p>Jupyter Notebook - <a href="https://github.com/kmn5409/GSoC_CHAOSS/blob/master/Augur/Perceval/github_issues_scores%202.ipynb">github_issues_scores 2</a></p>


  </div><a class="u-url" href="/gsoc/2018/07/20/gsoc-Week-10.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Keanu Nichols Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Keanu Nichols</li><li><a class="u-email" href="mailto:keanu.nichols@my.uwi.edu">keanu.nichols@my.uwi.edu</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/kmn5409"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kmn5409</span></a></li><li><a href="https://www.linkedin.com/in/keanu-nichols"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">keanu-nichols</span></a></li><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>rss</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A blog about Keanu Nichols for writing about his school/work experience and projects that he worked on.
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
